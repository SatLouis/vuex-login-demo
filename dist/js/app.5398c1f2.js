(function(){"use strict";var e={2221:function(e,n,t){var o=t(9242),r=t(2483),a=t(3396);function i(e,n){return(0,a.wg)(),(0,a.iD)("h1",null,"Home Page")}var u=t(89);const s={},l=(0,u.Z)(s,[["render",i]]);var c=l,d=(t(7658),t(4870)),p=t(7139),f=t(65);const m=e=>((0,a.dD)("data-v-5e90083e"),e=e(),(0,a.Cn)(),e),v={class:"form-item"},g=m((()=>(0,a._)("label",null,"账号：",-1))),h={class:"form-item"},w=m((()=>(0,a._)("label",null,"密码：",-1))),y={class:"form-item"},_=m((()=>(0,a._)("label",null,null,-1))),I=["disabled"];var b={__name:"Login",setup(e){const n=(0,d.iH)(""),t=(0,d.iH)(""),i=(0,r.tv)(),u=(0,f.oR)(),s=(0,a.Fl)((()=>u.state.user.loading)),l=async()=>{if(!n.value&&!t.value)return alert("请输入账号密码！");const e=await u.dispatch("user/loginApi",{loginId:n.value,loginPwd:t.value});if(!e)return alert("账号密码不存在");u.commit("user/setUserInfo",e);const{to:o}=i.currentRoute.value.query;i.push(o?decodeURIComponent(o):"/home")};return(e,r)=>((0,a.wg)(),(0,a.iD)("form",{onSubmit:r[2]||(r[2]=(0,o.iM)(((...n)=>e.handleSubmit&&e.handleSubmit(...n)),["prevent"]))},[(0,a._)("div",v,[g,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=e=>n.value=e)},null,512),[[o.nr,n.value]])]),(0,a._)("div",h,[w,(0,a.wy)((0,a._)("input",{type:"password",autocomplete:"new-password","onUpdate:modelValue":r[1]||(r[1]=e=>t.value=e)},null,512),[[o.nr,t.value]])]),(0,a._)("div",y,[_,(0,a._)("button",{onClick:l,disabled:(0,d.SU)(s)},(0,p.zw)((0,d.SU)(s)?"loading...":"登录"),9,I)])],32))}};const U=(0,u.Z)(b,[["__scopeId","data-v-5e90083e"]]);var k=U;function O(e,n){return(0,a.wg)(),(0,a.iD)("h1",null,"个人中心")}const S={},D=(0,u.Z)(S,[["render",O]]);var L=D,A={__name:"Loading",setup(e){const n=(0,f.oR)(),t=(0,r.tv)();return(0,a.YP)((()=>n.state.user.userInfo.loginId),(e=>{if(e){const{to:e}=t.currentRoute.value.query;t.replace({path:e?decodeURIComponent(e):"/home"})}})),(e,n)=>((0,a.wg)(),(0,a.iD)("h1",null,"正在登录中..."))}};const C=A;var R=C;function x(e,n){return(0,a.wg)(),(0,a.iD)("h1",null,"新闻页")}const j={},P=(0,u.Z)(j,[["render",x]]);var F=P,H=[{path:"/",redirect:"/home"},{path:"/home",component:c},{path:"/news",component:F,meta:{auth:!0}},{path:"/loading",component:R},{path:"/login",component:k},{path:"/user",component:L,meta:{auth:!0}}];async function W(e=1e3){return new Promise(((n,t)=>{setTimeout(n,e)}))}async function Z(e,n){if(await W(),"admin"===e&&"123123"===n){const n={loginId:e,name:"管理员"};return localStorage.setItem("user",JSON.stringify(n)),n}}async function q(){await W(),localStorage.removeItem("user")}async function M(){await W();try{return JSON.parse(localStorage.getItem("user"))}catch(e){}}var N={namespaced:!0,state:()=>({userInfo:{},loading:!1}),mutations:{setUserInfo(e,n={}){e.userInfo=n},setLoading(e,n=!1){e.loading=n}},actions:{async loginApi({commit:e},{loginId:n,loginPwd:t}){e("setLoading",!0);const o=await Z(n,t);return e("setLoading",!1),o},async loginOutApi({commit:e}){e("setLoading",!0),await q(),e("setLoading",!1),e("setUserInfo")},async whoAmiApi({commit:e}){e("setLoading",!0);const n=await M();e("setLoading",!1),e("setUserInfo",n??{})}}};const T=window.store=(0,f.MT)({state:{},mutations:{},actions:{},modules:{user:N}});var Y=T;const z=(0,a.Fl)((()=>Y.state.user.userInfo)),E=(0,a.Fl)((()=>Y.state.user.loading));function J(e){return e.beforeEach(((e,n,t)=>{e.meta.auth&&!z.value.loginId?E.value?t({path:"/loading",query:{to:encodeURIComponent(e.path)}}):t({path:"/login",query:{to:encodeURIComponent(e.path)}}):t()})),e}const V=J((0,r.p7)({history:(0,r.r5)(),routes:H,strict:!0,sensitive:!0}));window.router=V;var B=V;const G={class:"user-name"},K={key:0};var Q={__name:"UserName",setup(e){const n=(0,f.oR)(),t=(0,r.tv)(),i=(0,a.Fl)((()=>n.state.user.userInfo)),u=(0,a.Fl)((()=>n.state.user.loading)),s=async()=>{await n.dispatch("user/loginOutApi"),t.push("/login")};return(e,n)=>{const t=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",G,[(0,d.SU)(u)?((0,a.wg)(),(0,a.iD)("span",K,"loading...")):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,d.SU)(i).loginId?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Wm)(t,{to:"/user"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,p.zw)((0,d.SU)(i).name),1)])),_:1}),(0,a._)("a",{href:"",onClick:n[0]||(n[0]=(0,o.iM)((e=>s()),["prevent"]))},"退出")],64)):((0,a.wg)(),(0,a.j4)(t,{key:1,to:"/login","exact-path":""},{default:(0,a.w5)((()=>[(0,a.Uk)("Login")])),_:1}))],64))])}}};const X=(0,u.Z)(Q,[["__scopeId","data-v-af092192"]]);var $=X;const ee={id:"nav"};var ne={__name:"App",setup(e){return(e,n)=>{const t=(0,a.up)("router-link"),o=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",ee,[(0,a.Wm)(t,{to:"/home"},{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1}),(0,a.Uk)(" | "),(0,a.Wm)(t,{to:"/news"},{default:(0,a.w5)((()=>[(0,a.Uk)("News")])),_:1}),(0,a.Uk)(" | "),(0,a.Wm)($)]),(0,a.Wm)(o)])}}};const te=ne;var oe=te;Y.dispatch("user/whoAmiApi"),(0,o.ri)(oe).use(B).use(Y).mount("#app")}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var a=n[o]={exports:{}};return e[o](a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(n,o,r,a){if(!o){var i=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],a=e[c][2];for(var u=!0,s=0;s<o.length;s++)(!1&a||i>=a)&&Object.keys(t.O).every((function(e){return t.O[e](o[s])}))?o.splice(s--,1):(u=!1,a<i&&(i=a));if(u){e.splice(c--,1);var l=r();void 0!==l&&(n=l)}}return n}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,r,a]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var r,a,i=o[0],u=o[1],s=o[2],l=0;if(i.some((function(n){return 0!==e[n]}))){for(r in u)t.o(u,r)&&(t.m[r]=u[r]);if(s)var c=s(t)}for(n&&n(o);l<i.length;l++)a=i[l],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(c)},o=self["webpackChunkvuex_login"]=self["webpackChunkvuex_login"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(2221)}));o=t.O(o)})();
//# sourceMappingURL=app.5398c1f2.js.map